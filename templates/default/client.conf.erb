client
<% if node["openvpn"]["type"] == "server-bridge" -%>
dev tap
<% else -%>
dev tun
<% end -%>
proto <%= node["openvpn"]["proto"] %>
remote <%= node["openvpn"]["gateway"] %> <%= node["openvpn"]["port"] %>
resolv-retry infinite
nobind
persist-key
persist-tun
ca ca.crt
cert <%= @username %>.crt
key <%= @username %>.key
comp-lzo
verb 3

<% if node['openvpn']['keepalive'] -%>
keepalive <%= node['openvpn']['keepalive'] %>
<% end %>

<% if node['openvpn']['cipher'] -%>
cipher <%= node['openvpn']['cipher'] %>
<% end %>

# Downgrade privileges after initialization (non-Windows only)
# TODO Comment out for windows machines
user nobody
group nobody
